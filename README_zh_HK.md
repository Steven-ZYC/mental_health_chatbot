# 心理健康支援聊天機械人

[English](README.md) | [简体中文](README_zh_CN.md) | [香港繁體中文](README_zh_HK.md)

一個基於人工智能的對話系統，通過情緒檢測和回應式對話為用戶提供心理健康支援。

## 核心功能

- **雙模式情緒分析**：結合面部表情識別和文本情感分析
- **實時面部情緒檢測**：使用電腦視覺技術檢測面部表情中的情緒
- **文本情緒分析**：分析用戶訊息中的情感內容
- **危機指標檢測**：識別潛在的心理健康危機信號
- **對話歷史管理**：維護上下文以提供更相關的回應
- **兩種操作模式**：
  - 用戶模式：為普通用戶提供簡化界面
  - 開發者模式：提供實時指標和調試資訊的高級界面

## 技術實現

### 1. 情緒識別模型 (EmotionDetector)

- **深度學習架構**：基於ResNet-18的卷積神經網絡
  - 修改後的ResNet-18模型，適應灰度圖像輸入（單通道）
  - 輸出層調整為7類情緒分類（happy, neutral, sad, surprise, angry, disgust, fear）
  
- **模型訓練與優化**：
  - 使用PyTorch框架實現
  - 支援CPU和CUDA加速（自動檢測可用設備）
  - 模型權重保存在`models/best_model.pth`

- **人臉檢測**：
  - 使用OpenCV的Haar級聯分類器進行人臉檢測
  - 實時視頻幀處理和情緒概率可視化

### 2. 語言處理系統 (LanguageProcessor)

- **文本情緒分析算法**：
  - 基於關鍵詞匹配和情感強度分析
  - 情感強度評估基於感嘆號、大寫字母、字母重複和強度詞彙
  
- **危機指標提取**：
  - 基於預定義關鍵詞識別潛在危機情況
  - 支援多種危機類別識別（自傷、暴力、緊急情況等）

### 3. 回應生成系統 (ResponseGenerator)

- **上下文感知回應**：
  - 基於當前情緒狀態和對話歷史生成個性化回應
  - 情緒變化檢測和相應的回應調整
  
- **危機回應機制**：
  - 優先級排序的危機回應策略
  - 集成支援資源和幫助熱線資訊

### 4. 多模態情緒融合

- **情緒狀態驗證算法**：
  - 結合視覺和文本情緒分析結果
  - 基於置信度的權重分配
  - 非中性情緒優先考慮策略

## 系統要求

- Python 3.9
- CUDA 11.6
- torch 11.2+cu116
- torchaudio 0.12.0+cu116
- torchvision 0.13.0+cu116
- OpenCV 4.7.0+

## 安裝指南

1. 複製儲存庫：
```bash
git clone <repository-url>
cd <repository-directory>